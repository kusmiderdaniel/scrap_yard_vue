{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport { toast } from 'bulma-toast';\nexport default {\n  name: 'EditTeam',\n  data() {\n    return {\n      team: {}\n    };\n  },\n  async mounted() {\n    await this.getOrCreateTeam();\n  },\n  methods: {\n    getOrCreateTeam() {\n      axios.get('/api/v1/teams/').then(response => {\n        this.team = response.data[0];\n      }).catch(error => {\n        console.log(JSON.stringify(error));\n      });\n    },\n    validateZipCode(zipcode) {\n      const regex = /^\\d{2}-\\d{3}$/; // Pattern for \"00-000\"\n      return regex.test(zipcode);\n    },\n    validateOrgNumber(orgNumber) {\n      const regex = /^\\d{3}-\\d{3}-\\d{2}-\\d{2}$/; // Pattern for \"000-000-00-00\"\n      return regex.test(orgNumber);\n    },\n    validateOrgNumber2(orgNumber2) {\n      const regex = /^\\d{9}$/; // Pattern for \"000000000\"\n      return regex.test(orgNumber2);\n    },\n    zipcodeInput() {\n      let zipcode_text = this.team.zipcode || '';\n\n      // Allow backspace and delete\n      if (zipcode_text.length === 6 && event.inputType === 'deleteContentBackward') {\n        zipcode_text = zipcode_text.substring(0, 6);\n      } else if (zipcode_text.length === 3 && event.inputType === 'deleteContentBackward') {\n        zipcode_text = zipcode_text.substring(0, 2);\n      }\n\n      // Add \"-\" after the first two characters\n      if (zipcode_text.length === 2 && event.inputType !== 'deleteContentBackward') {\n        zipcode_text += '-';\n      }\n      this.team.zipcode = zipcode_text;\n    },\n    orgNumberInput() {\n      let org_number_text = this.team.org_number || '';\n\n      // Allow backspace and delete\n      if (org_number_text.length === 13 && event.inputType === 'deleteContentBackward') {\n        org_number_text = org_number_text.substring(0, 13);\n      } else if (org_number_text.length === 10 && event.inputType === 'deleteContentBackward') {\n        org_number_text = org_number_text.substring(0, 10);\n      } else if (org_number_text.length === 7 && event.inputType === 'deleteContentBackward') {\n        org_number_text = org_number_text.substring(0, 7);\n      }\n\n      // Add \"-\" after the first two characters\n      if (org_number_text.length === 3 && event.inputType !== 'deleteContentBackward') {\n        org_number_text += '-';\n      } else if (org_number_text.length === 7 && event.inputType !== 'deleteContentBackward') {\n        org_number_text += '-';\n      } else if (org_number_text.length === 10 && event.inputType !== 'deleteContentBackward') {\n        org_number_text += '-';\n      }\n      this.team.org_number = org_number_text;\n    },\n    submitForm() {\n      // Validate org_number\n      if (this.team.org_number && !/^\\d{3}-\\d{3}-\\d{2}-\\d{2}$/.test(this.team.org_number)) {\n        // Display an error message for invalid zip code\n        toast({\n          message: 'Nieprawidłowy NIP. Wprowadź w formie 000-000-00-00.',\n          type: 'is-danger',\n          dismissible: true,\n          pauseOnHover: true,\n          duration: 3000,\n          position: 'bottom-right'\n        });\n        return;\n      }\n\n      // Validate org_number2\n      if (this.team.org_number2 && !/^\\d{9}$/.test(this.team.org_number2)) {\n        // Display an error message for invalid org number 2\n        toast({\n          message: 'REGON powinien składać się z 9 cyfr.',\n          type: 'is-danger',\n          dismissible: true,\n          pauseOnHover: true,\n          duration: 3000,\n          position: 'bottom-right'\n        });\n        return;\n      }\n\n      // Validate zip code\n      if (this.team.zipcode && !/^(\\d{2}-\\d{3})?$/.test(this.team.zipcode)) {\n        // Display an error message for invalid zip code\n        toast({\n          message: 'Nieprawidłowy kod pocztowy. Wprowadź w formie 00-000.',\n          type: 'is-danger',\n          dismissible: true,\n          pauseOnHover: true,\n          duration: 3000,\n          position: 'bottom-right'\n        });\n        return;\n      }\n      axios.patch(`/api/v1/teams/${this.team.id}/`, this.team).then(response => {\n        toast({\n          message: 'Zmiany zostały zapisane',\n          type: 'is-success',\n          dismissible: true,\n          pauseOnHover: true,\n          duration: 2000,\n          position: 'bottom-right'\n        });\n        this.$router.push('/dashboard/my-account');\n      }).catch(error => {\n        console.log(JSON.stringify(error));\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","toast","name","data","team","mounted","getOrCreateTeam","methods","get","then","response","catch","error","console","log","JSON","stringify","validateZipCode","zipcode","regex","test","validateOrgNumber","orgNumber","validateOrgNumber2","orgNumber2","zipcodeInput","zipcode_text","length","event","inputType","substring","orgNumberInput","org_number_text","org_number","submitForm","message","type","dismissible","pauseOnHover","duration","position","org_number2","patch","id","$router","push"],"sources":["/Users/danielkusmider/Library/CloudStorage/OneDrive-Personal/Docs/Projects/ScrapYard/scrap_yard_vue/src/views/dashboard/EditTeam.vue"],"sourcesContent":["<template>\n    <div class=\"page-edit-team\">\n        <nav class=\"breadcrumb\" aria-label=\"breadcrumbs\">\n            <ul>\n                <li><router-link to=\"/dashboard\">Dashboard</router-link></li>\n                <li><router-link to=\"/dashboard/my-account\">Moje konto</router-link></li>\n                <li class=\"is-active\"><router-link to=\"/dashboard/my-account/edit-team\" aria-current=\"true\">Edytuj dane firmy</router-link></li>\n            </ul>\n        </nav>\n\n        <div class=\"columns is-multiline\">\n            <div class=\"column is-12\">\n                <h1 class=\"title\">Edytuj dane firmy</h1>\n            </div>\n\n            <div class=\"column is-6\">\n                <div class=\"field\">\n                    <label>Nazwa</label>\n                    <div class=\"control\">\n                        <input type=\"text\" class=\"input\" v-model=\"team.name\">\n                    </div>\n                </div>\n\n                <div class=\"field\">\n                    <label>Imię i Nazwisko właściciela</label>\n                    <div class=\"control\">\n                        <input type=\"text\" class=\"input\" v-model=\"team.owner_name\">\n                    </div>\n                </div>\n\n                <div class=\"field\">\n                    <label>Nazwa skrócona</label>\n                    <div class=\"control\">\n                        <input type=\"text\" class=\"input\" v-model=\"team.short_name\">\n                    </div>\n                </div>\n\n                <div class=\"field\">\n                    <label>NIP</label>\n                    <div class=\"control\">\n                        <input type=\"text\" class=\"input\" v-model=\"team.org_number\" @input=\"orgNumberInput\">\n                    </div>\n                    <p class=\"help is-danger\" v-if=\"!validateOrgNumber(team.org_number)\">\n                        NIP musi być w formacie 000-000-00-00.\n                    </p>\n                </div>\n\n                <div class=\"field\">\n                    <label>REGON</label>\n                    <div class=\"control\">\n                        <input type=\"text\" class=\"input\" v-model=\"team.org_number2\">\n                    </div>\n                    <p class=\"help is-danger\" v-if=\"!validateOrgNumber(team.org_number2)\">\n                        REGON musi zawierać 9 cyfr.\n                    </p>\n                </div>\n            </div>\n\n            <div class=\"column is-6\">\n                <div class=\"field\">\n                    <label>Numer telefonu</label>\n                    <div class=\"control\">\n                        <input type=\"number\" class=\"input\" v-model=\"team.phone_number\">\n                    </div>\n                </div>\n\n                <div class=\"field\">\n                    <label>Email</label>\n                    <div class=\"control\">\n                        <input type=\"email\" class=\"input\" v-model=\"team.email\">\n                    </div>\n                </div>\n\n                <div class=\"field\">\n                    <label>Adres</label>\n                    <div class=\"control\">\n                        <input type=\"text\" class=\"input\" v-model=\"team.address1\">\n                    </div>\n                </div>\n\n                <div class=\"field\">\n                    <label>Kod pocztowy</label>\n\n                    <div class=\"control\">\n                        <input type=\"text\" class=\"input\" placeholder=\"00-000\" v-model=\"team.zipcode\" @input=\"zipcodeInput\">\n                    </div>\n\n                    <p class=\"help is-danger\" v-if=\"!validateZipCode(team.zipcode)\">\n                        Kod pocztowy musi być w formacie 00-000.\n                    </p>\n                </div>\n\n                <div class=\"field\">\n                    <label>Miejscowość</label>\n                    <div class=\"control\">\n                        <input type=\"text\" class=\"input\" v-model=\"team.place\">\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"column is-12\">\n                <div class=\"field\">\n                    <div class=\"control\">\n                        <button class=\"button is-success\" @click=\"submitForm\">Zapisz</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport { toast } from 'bulma-toast'\n\nexport default {\n    name: 'EditTeam',\n    data() {\n        return {\n            team: {}\n        }\n    },\n    async mounted() {\n        await this.getOrCreateTeam()\n    },\n    methods: {\n        getOrCreateTeam() {\n            axios\n                .get('/api/v1/teams/')\n                .then(response => {\n                    this.team = response.data[0]\n                })\n                .catch(error => {\n                    console.log(JSON.stringify(error))\n                })\n        },\n        validateZipCode(zipcode) {\n            const regex = /^\\d{2}-\\d{3}$/; // Pattern for \"00-000\"\n            return regex.test(zipcode);\n        },\n        validateOrgNumber(orgNumber) {\n            const regex = /^\\d{3}-\\d{3}-\\d{2}-\\d{2}$/; // Pattern for \"000-000-00-00\"\n            return regex.test(orgNumber);\n        },\n        validateOrgNumber2(orgNumber2) {\n            const regex = /^\\d{9}$/; // Pattern for \"000000000\"\n            return regex.test(orgNumber2);\n        },\n        zipcodeInput() {\n            let zipcode_text = this.team.zipcode || ''\n\n            // Allow backspace and delete\n            if (zipcode_text.length === 6 && event.inputType === 'deleteContentBackward') {\n                zipcode_text = zipcode_text.substring(0, 6);\n            } else if (zipcode_text.length === 3 && event.inputType === 'deleteContentBackward') {\n                zipcode_text = zipcode_text.substring(0, 2);\n            }\n\n            // Add \"-\" after the first two characters\n            if (zipcode_text.length === 2 && event.inputType !== 'deleteContentBackward') {\n                zipcode_text += '-';\n            }\n\n            this.team.zipcode = zipcode_text\n        },\n        orgNumberInput() {\n            let org_number_text = this.team.org_number || ''\n\n            // Allow backspace and delete\n            if (org_number_text.length === 13 && event.inputType === 'deleteContentBackward') {\n                org_number_text = org_number_text.substring(0, 13);\n            } else if (org_number_text.length === 10 && event.inputType === 'deleteContentBackward') {\n                org_number_text = org_number_text.substring(0, 10);\n            } else if (org_number_text.length === 7 && event.inputType === 'deleteContentBackward') {\n                org_number_text = org_number_text.substring(0, 7);\n            }\n\n            // Add \"-\" after the first two characters\n            if (org_number_text.length === 3 && event.inputType !== 'deleteContentBackward') {\n                org_number_text += '-';\n            } else if (org_number_text.length === 7 && event.inputType !== 'deleteContentBackward') {\n                org_number_text += '-';\n            } else if (org_number_text.length === 10 && event.inputType !== 'deleteContentBackward') {\n                org_number_text += '-';\n            }\n\n            this.team.org_number = org_number_text\n        },\n        submitForm() {\n\n            // Validate org_number\n            if (this.team.org_number && !/^\\d{3}-\\d{3}-\\d{2}-\\d{2}$/.test(this.team.org_number)) {\n                // Display an error message for invalid zip code\n                toast({\n                    message: 'Nieprawidłowy NIP. Wprowadź w formie 000-000-00-00.',\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                    duration: 3000,\n                    position: 'bottom-right',\n                });\n                return;\n            }\n\n            // Validate org_number2\n            if (this.team.org_number2 && !/^\\d{9}$/.test(this.team.org_number2)) {\n                // Display an error message for invalid org number 2\n                toast({\n                    message: 'REGON powinien składać się z 9 cyfr.',\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                    duration: 3000,\n                    position: 'bottom-right',\n                });\n                return;\n            }\n\n            // Validate zip code\n            if (this.team.zipcode && !/^(\\d{2}-\\d{3})?$/.test(this.team.zipcode)) {\n                // Display an error message for invalid zip code\n                toast({\n                    message: 'Nieprawidłowy kod pocztowy. Wprowadź w formie 00-000.',\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                    duration: 3000,\n                    position: 'bottom-right',\n                });\n                return;\n            }\n\n            axios\n                .patch(`/api/v1/teams/${this.team.id}/`, this.team)\n                .then(response => {\n                    toast({\n                        message: 'Zmiany zostały zapisane',\n                        type: 'is-success',\n                        dismissible: true,\n                        pauseOnHover: true,\n                        duration: 2000,\n                        position: 'bottom-right',\n                    })\n\n                    this.$router.push('/dashboard/my-account')\n                })\n                .catch(error => {\n                    console.log(JSON.stringify(error))\n                })\n        }\n    }\n}\n</script>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}