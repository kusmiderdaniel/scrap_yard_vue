{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport { toast } from 'bulma-toast';\nexport default {\n  name: 'AddItem',\n  data() {\n    return {\n      item: {\n        category: '',\n        name: '',\n        buy_price: 0.00,\n        sell_price: 0\n      },\n      categories: []\n    };\n  },\n  mounted() {\n    this.getCategories();\n  },\n  methods: {\n    getCategories() {\n      axios.get('/api/v1/categories/').then(response => {\n        for (let i = 0; i < response.data.length; i++) {\n          this.categories.push(response.data[i]);\n        }\n      }).catch(error => {\n        console.log(JSON.stringify(error));\n      });\n    },\n    confirmCancel() {\n      const confirmMessage = `Czy na pewno chcesz anluować wprowadzanie produktu?`;\n      if (window.confirm(confirmMessage)) {\n        this.$router.push('/dashboard/items');\n      }\n    },\n    submitForm() {\n      const tempItem = {\n        ...this.item\n      };\n      this.item.category_name = this.item.category.name;\n      this.item.category = this.item.category.id;\n\n      // Validation for category\n      if (!this.item.category) {\n        toast({\n          message: 'Proszę wybrać kategorię.',\n          type: 'is-danger',\n          dismissible: true,\n          pauseOnHover: true,\n          duration: 2000,\n          position: 'bottom-right'\n        });\n\n        // Restore the form data\n        this.item = {\n          ...tempItem\n        };\n        return; // Prevent form submission if validation fails\n      }\n\n      // Validation for name\n      if (!this.item.name.trim()) {\n        toast({\n          message: 'Proszę wprowadzić nazwę produktu.',\n          type: 'is-danger',\n          dismissible: true,\n          pauseOnHover: true,\n          duration: 2000,\n          position: 'bottom-right'\n        });\n\n        // Restore the form data\n        this.item = {\n          ...tempItem\n        };\n        return; // Prevent form submission if validation fails\n      }\n\n      // Validation for item_code\n      if (!/^[0-9]{6}$/.test(this.item.item_code)) {\n        toast({\n          message: 'Kod odpadu musi składać się z dokładnie 6 cyfr.',\n          type: 'is-danger',\n          dismissible: true,\n          pauseOnHover: true,\n          duration: 2000,\n          position: 'bottom-right'\n        });\n\n        // Restore the form data\n        this.item = {\n          ...tempItem\n        };\n        return;\n      }\n\n      // Validation for buy_price and sell_price\n      if (!/^\\d+(\\.\\d{1,2})?$/.test(this.item.buy_price) || parseFloat(this.item.buy_price) <= 0 || !/^\\d+(\\.\\d{1,2})?$/.test(this.item.sell_price) || parseFloat(this.item.sell_price) <= 0) {\n        toast({\n          message: 'Proszę wprowadzić poprawne ceny skupu i sprzedaży (większe niż 0, maksymalnie 2 miejsca po przecinku).',\n          type: 'is-danger',\n          dismissible: true,\n          pauseOnHover: true,\n          duration: 2000,\n          position: 'bottom-right'\n        });\n\n        // Restore the form data\n        this.item = {\n          ...tempItem\n        };\n        return; // Prevent form submission if validation fails\n      }\n      axios.post(\"/api/v1/items/\", this.item).then(response => {\n        toast({\n          message: 'Dodano produkt',\n          type: 'is-success',\n          dismissible: true,\n          pauseOnHover: true,\n          duration: 2000,\n          position: 'bottom-right'\n        });\n        this.$router.push('/dashboard/items');\n      }).catch(error => {\n        console.log(error.response);\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","toast","name","data","item","category","buy_price","sell_price","categories","mounted","getCategories","methods","get","then","response","i","length","push","catch","error","console","log","JSON","stringify","confirmCancel","confirmMessage","window","confirm","$router","submitForm","tempItem","category_name","id","message","type","dismissible","pauseOnHover","duration","position","trim","test","item_code","parseFloat","post"],"sources":["/Users/danielkusmider/Library/CloudStorage/OneDrive-Personal/Docs/Projects/ScrapYard/scrap_yard_vue/src/views/dashboard/AddItem.vue"],"sourcesContent":["<template>\n    <div class=\"page-add-item\">\n        <nav class=\"breadcrumb\" aria-label=\"breadcrumbs\">\n            <ul>\n                <li><router-link to=\"/dashboard\">Dashboard</router-link></li>\n                <li><router-link to=\"/dashboard/items\">Produkty</router-link></li>\n                <li class=\"is-active\"><router-link to=\"/dashboard/items/add-item\" aria-current=\"true\">Nowy produkt</router-link></li>\n            </ul>\n        </nav>\n\n        <div class=\"columns is-multiline\">\n            <div class=\"column is-12\">\n                <h1 class=\"title\">Nowy produkt</h1>\n            </div>\n\n            <div class=\"column is-6\">\n                <div class=\"field\">\n                    <label class=\"label\">Kategoria</label>\n\n                    <div class=\"select mr-4\">\n                        <select name=\"category\" v-model=\"item.category\">\n                            <option value=\"\">- wybierz kategorię -</option>\n                            <option \n                                v-for=\"category in categories\"\n                                v-bind:key=\"category.id\"\n                                v-bind:value=\"category\"\n                            >\n                                {{ category.name }}\n                            </option>\n                        </select>\n                    </div>\n\n                    <router-link to=\"/dashboard/items/add-category\" class=\"button is-info\">Nowa kategoria</router-link>\n                </div>\n\n                <div class=\"field\">\n                    <label class=\"label\">Nazwa</label>\n                    \n                    <div class=\"control\">\n                        <input type=\"text\" name=\"name\" class=\"input\" v-model=\"item.name\">\n                    </div>\n                </div>\n\n                <div class=\"field\">\n                    <label class=\"label\">Kod odpadu</label>\n                    \n                    <div class=\"control\">\n                        <input \n                            type=\"text\" \n                            name=\"item_code\" \n                            class=\"input\" \n                            v-model=\"item.item_code\" \n                            pattern=\"[0-9]*\" \n                            maxlength=\"6\"\n                            title=\"Kod odpadu musi składać się z 6 cyfr.\">\n                    </div>\n                    <p class=\"help is-light\">\n                        Kod pocztowy musi być w formacie 00-000.\n                    </p>\n                </div>\n\n                <div class=\"field\">\n                    <label class=\"label\">Cena skupu</label>\n                    \n                    <div class=\"control\">\n                        <input type=\"number\" step=\"0.01\" name=\"buy_price\" class=\"input\" v-model.number=\"item.buy_price\">\n                    </div>\n                </div>\n\n                <div class=\"field\">\n                    <label class=\"label\">Cena sprzedaży</label>\n                    \n                    <div class=\"control\">\n                        <input type=\"number\" step=\"0.01\" name=\"sell_price\" class=\"input\" v-model=\"item.sell_price\">\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"column is-12\">\n                <div class=\"field\">\n                    <div class=\"control\">\n                        <button class=\"button is-success mr-4\" @click=\"submitForm\">Zapisz</button>\n                        <button class=\"button is-danger\" @click=\"confirmCancel\">Anuluj</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport { toast } from 'bulma-toast'\n\nexport default {\n    name: 'AddItem',\n    data() {\n        return {\n            item: {\n                category: '',\n                name: '',\n                buy_price: 0.00,\n                sell_price: 0\n            },\n            categories: []\n        }\n    },\n    mounted() {\n        this.getCategories()\n    },\n    methods: {\n        getCategories() {\n            axios\n                .get('/api/v1/categories/')\n                .then(response => {\n                    for (let i = 0; i < response.data.length; i++) {\n                        this.categories.push(response.data[i])\n                    }\n                })\n                .catch(error => {\n                    console.log(JSON.stringify(error))\n                })\n        },\n        confirmCancel() {\n            const confirmMessage = `Czy na pewno chcesz anluować wprowadzanie produktu?`\n\n            if (window.confirm(confirmMessage)) {\n                this.$router.push('/dashboard/items')\n            }\n        },\n        submitForm() {\n            const tempItem = { ...this.item }\n\n            this.item.category_name = this.item.category.name\n            this.item.category = this.item.category.id\n\n            // Validation for category\n            if (!this.item.category) {\n                toast({\n                    message: 'Proszę wybrać kategorię.',\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                    duration: 2000,\n                    position: 'bottom-right',\n                })\n\n                // Restore the form data\n                this.item = { ...tempItem }\n                return // Prevent form submission if validation fails\n            }\n\n            // Validation for name\n            if (!this.item.name.trim()) {\n                toast({\n                    message: 'Proszę wprowadzić nazwę produktu.',\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                    duration: 2000,\n                    position: 'bottom-right',\n                })\n\n                // Restore the form data\n                this.item = { ...tempItem }\n                return // Prevent form submission if validation fails\n            }\n\n            // Validation for item_code\n            if (!/^[0-9]{6}$/.test(this.item.item_code)) {\n                toast({\n                    message: 'Kod odpadu musi składać się z dokładnie 6 cyfr.',\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                    duration: 2000,\n                    position: 'bottom-right',\n                })\n\n                // Restore the form data\n                this.item = { ...tempItem }\n                return\n            }\n\n            // Validation for buy_price and sell_price\n            if (\n                !/^\\d+(\\.\\d{1,2})?$/.test(this.item.buy_price) ||\n                parseFloat(this.item.buy_price) <= 0 ||\n                !/^\\d+(\\.\\d{1,2})?$/.test(this.item.sell_price) ||\n                parseFloat(this.item.sell_price) <= 0\n            ) {\n                toast({\n                    message: 'Proszę wprowadzić poprawne ceny skupu i sprzedaży (większe niż 0, maksymalnie 2 miejsca po przecinku).',\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                    duration: 2000,\n                    position: 'bottom-right',\n                })\n\n                // Restore the form data\n                this.item = { ...tempItem }\n                return // Prevent form submission if validation fails\n            }\n\n            axios\n                .post(\"/api/v1/items/\", this.item)\n                .then(response => {\n                    toast({\n                        message: 'Dodano produkt',\n                        type: 'is-success',\n                        dismissible: true,\n                        pauseOnHover: true,\n                        duration: 2000,\n                        position: 'bottom-right',\n                    })\n\n                    this.$router.push('/dashboard/items')\n                })\n                .catch(error => {\n                    console.log(error.response)\n                })\n        }\n    }\n}\n</script>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}