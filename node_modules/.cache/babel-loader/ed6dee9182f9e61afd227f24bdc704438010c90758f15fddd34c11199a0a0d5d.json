{"ast":null,"code":"import axios from 'axios';\nimport { toast } from 'bulma-toast';\nconst fileDownload = require('js-file-download');\nexport default {\n  name: 'Receipt',\n  data() {\n    return {\n      receipt: {}\n    };\n  },\n  mounted() {\n    this.getReceipt();\n    console.log(this.receipt);\n  },\n  methods: {\n    getReceipt() {\n      const receiptID = this.$route.params.id;\n      axios.get(`/api/v1/receipts/${receiptID}`).then(response => {\n        this.receipt = response.data;\n      }).catch(error => {\n        console.log(JSON.stringify(error));\n      });\n    },\n    formatDate(date) {\n      const options = {\n        day: '2-digit',\n        month: '2-digit',\n        year: 'numeric'\n      };\n      return new Date(date).toLocaleDateString(undefined, options);\n    },\n    getPdf() {\n      const receiptID = this.$route.params.id;\n      axios.get(`/api/v1/receipts/${receiptID}/generate_pdf/`, {\n        responseType: 'blob'\n      }).then(res => {\n        fileDownload(res.data, `receipt_${receiptID}.pdf`);\n      }).catch(err => {\n        console.log(err);\n      });\n    },\n    getItemTotal(item) {\n      const total = item.buy_price * item.quantity;\n      return parseFloat(total).toFixed(2);\n    }\n  }\n};","map":{"version":3,"names":["axios","toast","fileDownload","require","name","data","receipt","mounted","getReceipt","console","log","methods","receiptID","$route","params","id","get","then","response","catch","error","JSON","stringify","formatDate","date","options","day","month","year","Date","toLocaleDateString","undefined","getPdf","responseType","res","err","getItemTotal","item","total","buy_price","quantity","parseFloat","toFixed"],"sources":["/Users/danielkusmider/Library/CloudStorage/OneDrive-Personal/Docs/Projects/ScrapYard/scrap_yard_vue/src/views/dashboard/Receipt.vue"],"sourcesContent":["<template>\n    <div class=\"page-receipt\">\n        <nav class=\"breadcrumb\" aria-label=\"breadcrumbs\">\n            <ul>\n                <li><router-link to=\"/dashboard\">Dashboard</router-link></li>\n                <li><router-link to=\"/dashboard/receipts\">Kwity</router-link></li>\n                <li class=\"is-active\"><router-link :to=\"{ name: 'Receipt', params: { id: receipt.id }}\" aria-current=\"true\">{{ receipt.receipt_number }}</router-link></li>\n            </ul>\n        </nav>\n\n        <div class=\"columns is-multiline\">\n            <div class=\"column is-12\">\n                <h1 class=\"title\">{{ receipt.receipt_number }}</h1>\n                <h2 class=\"title is-5\">Data: {{ formatDate(receipt.date) }}</h2>\n                <div class=\"buttons\">\n                    <!-- <button @click=\"getPdf()\" class=\"button is-dark\">Download PDF</button> -->\n                </div>\n            </div>\n\n            <div class=\"column is-9 mb-4\">\n                <div class=\"box\">\n                    <h3 class=\"is-size-4 mb-5\">Kontrahent</h3>\n\n                    <p><strong>{{ receipt.client_name }}</strong></p>\n                    \n                    <p v-if=\"receipt.client_address1\">{{ receipt.client_address1 }}</p>\n                    <p v-if=\"receipt.client_address2\">{{ receipt.client_address2 }}</p>\n                    <p v-if=\"receipt.client_zipcode || receipt.client_place\">{{ receipt.client_zipcode }} {{ receipt.client_place }}</p>\n                </div>\n            </div>\n\n            <div class=\"column is-9 mb-4\">\n                <div class=\"box\">\n                    <h3 class=\"is-size-4 mb-5\">Produkty</h3>\n\n                    <table class=\"table is-fullwidth\">\n                        <thead>\n                            <tr>\n                                <th><div style=\"width: 150px;\">Produkt</div></th>\n                                <th><div style=\"width: 100px;\">Kod odpadu</div></th>\n                                <th><div style=\"width: 60px;\">Ilość</div></th>\n                                <th><div style=\"width: 90px;\">Cena skupu</div></th>\n                                <th><div style=\"width: 100px;\">Wartość</div></th>\n                            </tr>\n                        </thead>\n\n                        <tbody>\n                            <tr \n                                v-for=\"item in receipt.receipt_items\"\n                                v-bind:key=\"item.id\"\n                            >\n                                <td>{{ item.name }}</td>\n                                <td class=\"has-text-centered\">{{ item.item_code }}</td>\n                                <td class=\"has-text-right\">{{ item.quantity }} kg</td>\n                                <td class=\"has-text-right\">{{ item.buy_price }} zł</td>\n                                <td class=\"has-text-right\">{{ getItemTotal(item) }} zł</td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n\n            <div class=\"column is-9\">\n                <div class=\"box\">\n                    <h3 class=\"is-size-4 mb-5\">Podsumowanie</h3>\n\n                    <div class=\"columns\">\n                        <div class=\"column is-6\">\n                            <p><strong>Do wypłaty</strong>: {{ receipt.gross_amount }} zł</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import axios from 'axios'\n    import { toast } from 'bulma-toast'\n\n    const fileDownload = require('js-file-download')\n\n    export default {\n        name: 'Receipt',\n        data() {\n            return {\n                receipt: {}\n            }\n        },\n        mounted() {\n            this.getReceipt()\n            console.log(this.receipt)\n        },\n        methods: {\n            getReceipt() {\n                const receiptID = this.$route.params.id\n\n                axios\n                    .get(`/api/v1/receipts/${receiptID}`)\n                    .then(response => {\n                        this.receipt = response.data\n                    })\n                    .catch(error => {\n                        console.log(JSON.stringify(error))\n                    })\n            },\n            formatDate(date) {\n                const options = { day: '2-digit', month: '2-digit', year: 'numeric' };\n                return new Date(date).toLocaleDateString(undefined, options);\n            },\n            getPdf() {\n                const receiptID = this.$route.params.id\n\n                axios\n                    .get(`/api/v1/receipts/${receiptID}/generate_pdf/`, {\n                        responseType: 'blob',\n                    }).then(res => {\n                        fileDownload(res.data, `receipt_${receiptID}.pdf`);\n                    }).catch(err => {\n                        console.log(err);\n                    })\n            },\n            getItemTotal(item) {\n                const total = item.buy_price * item.quantity\n\n                return parseFloat(total).toFixed(2)\n            },\n        }\n    }\n</script>"],"mappings":"AA8EI,OAAOA,KAAI,MAAO,OAAM;AACxB,SAASC,KAAI,QAAS,aAAY;AAElC,MAAMC,YAAW,GAAIC,OAAO,CAAC,kBAAkB;AAE/C,eAAe;EACXC,IAAI,EAAE,SAAS;EACfC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,OAAO,EAAE,CAAC;IACd;EACJ,CAAC;EACDC,OAAOA,CAAA,EAAG;IACN,IAAI,CAACC,UAAU,CAAC;IAChBC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACJ,OAAO;EAC5B,CAAC;EACDK,OAAO,EAAE;IACLH,UAAUA,CAAA,EAAG;MACT,MAAMI,SAAQ,GAAI,IAAI,CAACC,MAAM,CAACC,MAAM,CAACC,EAAC;MAEtCf,KAAI,CACCgB,GAAG,CAAE,oBAAmBJ,SAAU,EAAC,EACnCK,IAAI,CAACC,QAAO,IAAK;QACd,IAAI,CAACZ,OAAM,GAAIY,QAAQ,CAACb,IAAG;MAC/B,CAAC,EACAc,KAAK,CAACC,KAAI,IAAK;QACZX,OAAO,CAACC,GAAG,CAACW,IAAI,CAACC,SAAS,CAACF,KAAK,CAAC;MACrC,CAAC;IACT,CAAC;IACDG,UAAUA,CAACC,IAAI,EAAE;MACb,MAAMC,OAAM,GAAI;QAAEC,GAAG,EAAE,SAAS;QAAEC,KAAK,EAAE,SAAS;QAAEC,IAAI,EAAE;MAAU,CAAC;MACrE,OAAO,IAAIC,IAAI,CAACL,IAAI,CAAC,CAACM,kBAAkB,CAACC,SAAS,EAAEN,OAAO,CAAC;IAChE,CAAC;IACDO,MAAMA,CAAA,EAAG;MACL,MAAMpB,SAAQ,GAAI,IAAI,CAACC,MAAM,CAACC,MAAM,CAACC,EAAC;MAEtCf,KAAI,CACCgB,GAAG,CAAE,oBAAmBJ,SAAU,gBAAe,EAAE;QAChDqB,YAAY,EAAE;MAClB,CAAC,CAAC,CAAChB,IAAI,CAACiB,GAAE,IAAK;QACXhC,YAAY,CAACgC,GAAG,CAAC7B,IAAI,EAAG,WAAUO,SAAU,MAAK,CAAC;MACtD,CAAC,CAAC,CAACO,KAAK,CAACgB,GAAE,IAAK;QACZ1B,OAAO,CAACC,GAAG,CAACyB,GAAG,CAAC;MACpB,CAAC;IACT,CAAC;IACDC,YAAYA,CAACC,IAAI,EAAE;MACf,MAAMC,KAAI,GAAID,IAAI,CAACE,SAAQ,GAAIF,IAAI,CAACG,QAAO;MAE3C,OAAOC,UAAU,CAACH,KAAK,CAAC,CAACI,OAAO,CAAC,CAAC;IACtC;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}