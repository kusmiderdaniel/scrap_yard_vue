{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"page-login\"\n};\nconst _hoisted_2 = {\n  class: \"columns\"\n};\nconst _hoisted_3 = {\n  class: \"column is-4 is-offset-4\"\n};\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"title\"\n}, \"Log in\", -1 /* HOISTED */);\nconst _hoisted_5 = {\n  class: \"field\"\n};\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"label\", null, \"Username\", -1 /* HOISTED */);\nconst _hoisted_7 = {\n  class: \"control\"\n};\nconst _hoisted_8 = {\n  class: \"field\"\n};\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"label\", null, \"Password\", -1 /* HOISTED */);\nconst _hoisted_10 = {\n  class: \"control\"\n};\nconst _hoisted_11 = {\n  key: 0,\n  class: \"notification is-danger\"\n};\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"field\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"control\"\n}, [/*#__PURE__*/_createElementVNode(\"button\", {\n  class: \"button is-success\"\n}, \"Log in\")])], -1 /* HOISTED */);\nconst _hoisted_13 = /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1 /* HOISTED */);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.submitForm && $options.submitForm(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _createElementVNode(\"div\", _hoisted_7, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"email\",\n    name: \"username\",\n    class: \"input\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.username = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.username]])])]), _createElementVNode(\"div\", _hoisted_8, [_hoisted_9, _createElementVNode(\"div\", _hoisted_10, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    class: \"input\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.password = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.password]])])]), $data.errors.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.errors, error => {\n    return _openBlock(), _createElementBlock(\"p\", {\n      key: error\n    }, _toDisplayString(error), 1 /* TEXT */);\n  }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true), _hoisted_12], 32 /* NEED_HYDRATION */), _hoisted_13, _createVNode(_component_router_link, {\n    to: \"/sign-up\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Click here\")]),\n    _: 1 /* STABLE */\n  }), _createTextVNode(\" to sign up \")])])]);\n}","map":{"version":3,"names":["class","_createElementVNode","key","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","onSubmit","_cache","_withModifiers","args","$options","submitForm","_hoisted_5","_hoisted_6","_hoisted_7","type","name","$event","$data","username","_hoisted_8","_hoisted_9","_hoisted_10","password","errors","length","_hoisted_11","_Fragment","_renderList","error","_toDisplayString","_createCommentVNode","_hoisted_12","_hoisted_13","_createVNode","_component_router_link","to","default","_withCtx","_createTextVNode","_"],"sources":["/Users/danielkusmider/Library/CloudStorage/OneDrive-Personal/Docs/Projects/ScrapYard/scrap_yard_vue/src/views/LogIn.vue"],"sourcesContent":["<template>\n    <div class=\"page-login\">\n        <div class=\"columns\">\n            <div class=\"column is-4 is-offset-4\">\n                <h1 class=\"title\">Log in</h1>\n\n                <form @submit.prevent=\"submitForm\">\n                    <div class=\"field\">\n                        <label>Username</label>\n                        <div class=\"control\">\n                            <input type=\"email\" name=\"username\" class=\"input\" v-model=\"username\">\n                        </div>\n                    </div>\n\n                    <div class=\"field\">\n                        <label>Password</label>\n                        <div class=\"control\">\n                            <input type=\"password\" name=\"password\" class=\"input\" v-model=\"password\">\n                        </div>\n                    </div>\n\n                    <div class=\"notification is-danger\" v-if=\"errors.length\">\n                        <p v-for=\"error in errors\" v-bind:key=\"error\">{{ error }}</p>\n                    </div>\n\n                    <div class=\"field\">\n                        <div class=\"control\">\n                            <button class=\"button is-success\">Log in</button>\n                        </div>\n                    </div>\n                </form>\n\n                <hr>\n\n                <router-link to=\"/sign-up\">Click here</router-link> to sign up\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\n\nexport default {\n    name: 'LogIn',\n    data () {\n        return {\n            username: '',\n            password: '',\n            errors: []\n        }\n    },\n    methods: {\n        async submitForm(e) {\n            axios.defaults.headers.common[\"Authorization\"] = \"\"\n\n            localStorage.removeItem('token')\n\n            const formData = {\n                username: this.username,\n                password: this.password\n            }\n\n            await axios\n                .post(\"/api/v1/token/login/\", formData)\n                .then(response => {\n                    const token = response.data.auth_token\n\n                    this.$store.commit('setToken', token)\n\n                    axios.defaults.headers.common[\"Authorization\"] = \"Token \" + token\n\n                    localStorage.setItem(\"token\", token)\n                })\n                .catch(error => {\n                    if (error.response) {\n                        for (const property in error.response.data) {\n                            this.errors.push(`${property}: ${error.response.data[property]}`)\n                        }\n\n                        console.log(JSON.stringify(error.response.data))\n                    } else if (error.message) {\n                        console.log(JSON.stringify(error.message))\n                    } else {\n                        console.log(JSON.stringify(error))\n                    }\n                })\n\n            axios\n                .get('/api/v1/users/me')\n                .then(response => {\n                    this.$store.commit('setUser', {'username': response.data.username, 'id': response.data.id})\n\n                    localStorage.setItem('username', response.data.username)\n                    localStorage.setItem('userid', response.data.id)\n\n                    this.$router.push('/dashboard')\n                })\n                .catch(error => {\n                    console.log(JSON.stringify(error))\n                })\n        }\n    }\n}\n</script>"],"mappings":";;EACSA,KAAK,EAAC;AAAY;;EACdA,KAAK,EAAC;AAAS;;EACXA,KAAK,EAAC;AAAyB;gCAChCC,mBAAA,CAA6B;EAAzBD,KAAK,EAAC;AAAO,GAAC,QAAM;;EAGfA,KAAK,EAAC;AAAO;gCACdC,mBAAA,CAAuB,eAAhB,UAAQ;;EACVD,KAAK,EAAC;AAAS;;EAKnBA,KAAK,EAAC;AAAO;gCACdC,mBAAA,CAAuB,eAAhB,UAAQ;;EACVD,KAAK,EAAC;AAAS;;EAhB5CE,GAAA;EAqByBF,KAAK,EAAC;;iCAIXC,mBAAA,CAIM;EAJDD,KAAK,EAAC;AAAO,I,aACdC,mBAAA,CAEM;EAFDD,KAAK,EAAC;AAAS,I,aAChBC,mBAAA,CAAiD;EAAzCD,KAAK,EAAC;AAAmB,GAAC,QAAM,E;iCAKpDC,mBAAA,CAAI;;;uBA/BhBE,mBAAA,CAoCM,OApCNC,UAoCM,GAnCFH,mBAAA,CAkCM,OAlCNI,UAkCM,GAjCFJ,mBAAA,CAgCM,OAhCNK,UAgCM,GA/BFC,UAA6B,EAE7BN,mBAAA,CAwBO;IAxBAO,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAN7BC,cAAA,KAAAC,IAAA,KAMuCC,QAAA,CAAAC,UAAA,IAAAD,QAAA,CAAAC,UAAA,IAAAF,IAAA,CAAU;MAC7BV,mBAAA,CAKM,OALNa,UAKM,GAJFC,UAAuB,EACvBd,mBAAA,CAEM,OAFNe,UAEM,G,gBADFf,mBAAA,CAAqE;IAA9DgB,IAAI,EAAC,OAAO;IAACC,IAAI,EAAC,UAAU;IAAClB,KAAK,EAAC,OAAO;IAV7E,uBAAAS,MAAA,QAAAA,MAAA,MAAAU,MAAA,IAUuFC,KAAA,CAAAC,QAAQ,GAAAF,MAAA;iDAARC,KAAA,CAAAC,QAAQ,E,OAI3EpB,mBAAA,CAKM,OALNqB,UAKM,GAJFC,UAAuB,EACvBtB,mBAAA,CAEM,OAFNuB,WAEM,G,gBADFvB,mBAAA,CAAwE;IAAjEgB,IAAI,EAAC,UAAU;IAACC,IAAI,EAAC,UAAU;IAAClB,KAAK,EAAC,OAAO;IAjBhF,uBAAAS,MAAA,QAAAA,MAAA,MAAAU,MAAA,IAiB0FC,KAAA,CAAAK,QAAQ,GAAAN,MAAA;iDAARC,KAAA,CAAAK,QAAQ,E,OAIpCL,KAAA,CAAAM,MAAM,CAACC,MAAM,I,cAAvDxB,mBAAA,CAEM,OAFNyB,WAEM,I,kBADFzB,mBAAA,CAA6D0B,SAAA,QAtBrFC,WAAA,CAsB2CV,KAAA,CAAAM,MAAM,EAAfK,KAAK;yBAAf5B,mBAAA,CAA6D;MAA3BD,GAAG,EAAE6B;IAAK,GAAAC,gBAAA,CAAKD,KAAK;sCAtB9EE,mBAAA,gBAyBoBC,WAIM,C,4BAGVC,WAAI,EAEJC,YAAA,CAAmDC,sBAAA;IAAtCC,EAAE,EAAC;EAAU;IAlC1CC,OAAA,EAAAC,QAAA,CAkC2C,MAAU,CAlCrDC,gBAAA,CAkC2C,YAAU,E;IAlCrDC,CAAA;MAAAD,gBAAA,CAkCmE,cACvD,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}